{"ast":null,"code":"import _classCallCheck from\"C:/Users/79282/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/79282/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this._url=options.url;this._headers=options.headers;}_createClass(Api,[{key:\"getUserInfo\",value:function getUserInfo(){return fetch(\"\".concat(this._url,\"/users/me\"),{method:'GET',headers:this._headers}).then(this._handleResponse);}},{key:\"getInitialCards\",value:function getInitialCards(){return fetch(\"\".concat(this._url,\"/cards\"),{method:'GET',headers:this._headers}).then(this._handleResponse);}},{key:\"editProfile\",value:function editProfile(data){return fetch(\"\".concat(this._url,\"/users/me\"),{method:'PATCH',headers:this._headers,body:JSON.stringify({name:data.name,about:data.about})}).then(this._handleResponse);}},{key:\"changeAvatar\",value:function changeAvatar(url){return fetch(\"\".concat(this._url,\"/users/me/avatar\"),{method:'PATCH',headers:this._headers,body:JSON.stringify({avatar:url})}).then(this._handleResponse);}},{key:\"getAppInfo\",value:function getAppInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()]);}},{key:\"editCard\",value:function editCard(data){return fetch(\"\".concat(this._url,\"/cards\"),{method:'POST',headers:this._headers,body:JSON.stringify({name:data.name,link:data.link})}).then(this._handleResponse);}},{key:\"deleteCard\",value:function deleteCard(cardId){return fetch(\"\".concat(this._url,\"/cards/\").concat(cardId),{method:'DELETE',headers:this._headers}).then(this._handleResponse);}},{key:\"like\",value:function like(cardId){return fetch(\"\".concat(this._url,\"/cards/\").concat(cardId,\"/likes\"),{method:'PUT',headers:this._headers}).then(this._handleResponse);}},{key:\"removeLike\",value:function removeLike(cardId){return fetch(\"\".concat(this._url,\"/cards/\").concat(cardId,\"/likes\"),{method:'DELETE',headers:this._headers}).then(this._handleResponse);}},{key:\"_handleResponse\",value:function _handleResponse(res){if(res.ok){return res.json();}else{return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isLiked){if(isLiked){return this.like(cardId);}else{return this.removeLike(cardId);}}}]);return Api;}();var api=new Api({url:'https://api.krivolapov.nomoredomainsmonster.ru',headers:{authorization:\"Bearer \".concat(localStorage.getItem('jwt')),'Content-type':'application/json'}});export{api};","map":{"version":3,"names":["Api","options","_classCallCheck","_url","url","_headers","headers","_createClass","key","value","getUserInfo","fetch","concat","method","then","_handleResponse","getInitialCards","editProfile","data","body","JSON","stringify","name","about","changeAvatar","avatar","getAppInfo","Promise","all","editCard","link","deleteCard","cardId","like","removeLike","res","ok","json","reject","status","changeLikeCardStatus","isLiked","api","authorization","localStorage","getItem"],"sources":["C:/Users/79282/react-mesto-api-full-gha/frontend/src/utils/api.js"],"sourcesContent":["class Api {\r\n    constructor(options) {\r\n        this._url = options.url;\r\n        this._headers = options.headers;\r\n    }\r\n\r\n    getUserInfo() {\r\n        return fetch(`${this._url}/users/me`, {\r\n            method: 'GET',\r\n            headers: this._headers,\r\n        }).then(this._handleResponse);\r\n    }\r\n\r\n    getInitialCards() {\r\n        return fetch(`${this._url}/cards`, {\r\n            method: 'GET',\r\n            headers: this._headers,\r\n        }).then(this._handleResponse);\r\n    }\r\n\r\n    editProfile(data) {\r\n        return fetch(`${this._url}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                about: data.about,\r\n            }),\r\n        }).then(this._handleResponse);\r\n    }\r\n\r\n    changeAvatar(url) {\r\n        return fetch(`${this._url}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                avatar: url,\r\n            }),\r\n        }).then(this._handleResponse);\r\n    }\r\n\r\n    getAppInfo() {\r\n        return Promise.all([this.getUserInfo(), this.getInitialCards()]);\r\n    }\r\n\r\n    editCard(data) {\r\n        return fetch(`${this._url}/cards`, {\r\n            method: 'POST',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                link: data.link,\r\n            }),\r\n        }).then(this._handleResponse);\r\n    }\r\n\r\n    deleteCard(cardId) {\r\n        return fetch(`${this._url}/cards/${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: this._headers,\r\n        }).then(this._handleResponse);\r\n    }\r\n\r\n    like(cardId) {\r\n        return fetch(`${this._url}/cards/${cardId}/likes`, {\r\n            method: 'PUT',\r\n            headers: this._headers,\r\n        }).then(this._handleResponse);\r\n    }\r\n\r\n    removeLike(cardId) {\r\n        return fetch(`${this._url}/cards/${cardId}/likes`, {\r\n            method: 'DELETE',\r\n            headers: this._headers,\r\n        }).then(this._handleResponse);\r\n    }\r\n\r\n    changeAvatar(url) {\r\n        return fetch(`${this._url}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                avatar: url,\r\n            }),\r\n        }).then(this._handleResponse);\r\n    }\r\n\r\n    _handleResponse(res) {\r\n        if (res.ok) {\r\n            return res.json();\r\n        } else {\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        }\r\n    }\r\n\r\n    changeLikeCardStatus(cardId, isLiked) {\r\n        if (isLiked) {\r\n            return this.like(cardId);\r\n        } else {\r\n            return this.removeLike(cardId);\r\n        }\r\n    }\r\n}\r\n\r\nconst api = new Api({\r\n    url: 'https://api.krivolapov.nomoredomainsmonster.ru',\r\n    headers: {\r\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n        'Content-type': 'application/json',\r\n    },\r\n});\r\n\r\nexport { api };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}